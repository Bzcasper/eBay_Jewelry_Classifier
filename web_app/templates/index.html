{% extends "layout.html" %}
{% block content %}
<h1>Jewelry Classification Pipeline</h1>
<p>Welcome! Use the navigation above to scrape data, clean data, train models, and run inference.</p>

<h2>Progress</h2>
<div class="progress-section">
    <h3>Scraping Progress:</h3>
    <div class="progress-bar-container"><div class="progress-bar" id="scraping-bar"></div></div>
    <h3>Cleaning Progress:</h3>
    <div class="progress-bar-container"><div class="progress-bar" id="cleaning-bar"></div></div>
    <h3>Training Progress:</h3>
    <div class="progress-bar-container"><div class="progress-bar" id="training-bar"></div></div>
    <h3>Inference Progress:</h3>
    <div class="progress-bar-container"><div class="progress-bar" id="inference-bar"></div></div>
</div>

<script>
    setInterval(() => {
        fetch("/progress/scraping").then(r=>r.json()).then(d=>{
            document.getElementById('scraping-bar').style.width = d.progress + '%';
        });
        fetch("/progress/cleaning").then(r=>r.json()).then(d=>{
            document.getElementById('cleaning-bar').style.width = d.progress + '%';
        });
        fetch("/progress/training").then(r=>r.json()).then(d=>{
            document.getElementById('training-bar').style.width = d.progress + '%';
        });
        fetch("/progress/inference").then(r=>r.json()).then(d=>{
            document.getElementById('inference-bar').style.width = d.progress + '%';
        });
    }, 2000);
</script>
{% endblock %}
